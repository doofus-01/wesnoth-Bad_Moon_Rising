#textdomain wesnoth-Bad_Moon_Rising
[scenario]
    id="2_07_Salvation"
    name= _ "Strange Salvation"
    map_data="{~add-ons/Bad_Moon_Rising/maps/2_07_Salvation.map}"
    # 20140719 - new scenario
    next_scenario=2_07_Control
    #    next_scenario=2_07_Volcano
    victory_when_enemies_defeated=no
    remove_from_carryover_on_defeat=no
    turns=12 # might need to change this, for 3 difficulty levels
    [music]
        name="underground.ogg"
    [/music]

    {BMR_DAYSHORT}
    {BMR_INIT_LUA}

    # modification: scenario ends with Raenna entering the cave.  Need to figure out what to do with Athanta -> it's been solved

    [event]
        name=prestart
        [objectives]
            side=3
            [objective]
                condition=win
                description=_ "Reach the keep at the summit"
            [/objective]
            [objective]
                condition=lose
                description=_ "Death of Raena"
            [/objective]
            [objective]
                condition=lose
                description=_ "Belleros arrives before Raenna reaches the keep"
                show_turn_counter=yes
            [/objective]
        [/objectives]
        # some of this stuff should be removed...
        [item]
            x,y=24,8
            image="scenery/monolith1.png"
        [/item]
        [item]
            x,y=3,13
            image="items/bones.png"
        [/item]
        [item]
            x,y=33,24
            image="items/bones.png"
        [/item]
        # 20181216 - This is to help Belleros get beyond Raenna, when player has control of both sides.
        # will add actual tunnel later in event
        [item]
            x,y=21,16
            image="scenery/snow_tunnel.png"
        [/item]

        [gear_item]
            gear_id=ice_blade
            x,y=3,12
        [/gear_item]
        [gear_item]
            gear_id=ancient_ring
            x,y=33,15
        [/gear_item]
        [gear_item]
            gear_id=ancient_helmet
            x,y=32,24
        [/gear_item]
        [gear_item]
            gear_id=sun_spear
            x,y=10,25
        [/gear_item]
        [gear_item]
            gear_id=jade_bracelet
            x,y=2,13
        [/gear_item]
        #        [item]
        #            x=52
        #            y=6
        #            image="items/ball-blue.png"
        #        [/item]
        [set_variable]
            name=open_cave
            value=0
        [/set_variable]
        [set_variable]
            name=mono
            value=0
        [/set_variable]
        [set_variable]
            name=rand2
            value=0
        [/set_variable]
        # I don't think this is used anymore
        [set_variable]
            name=side6count
            value=0
        [/set_variable]
        # I don't think this is used anymore
        [set_variable]
            name=side5count
            value=0
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=-1
        [/set_variable]
        # I don't think this is used anymore
        [set_variable]
            name=fire_count
            value=-1
        [/set_variable]
        [redraw][/redraw]
        # Belleros, Ares, Echidna are not on the map at first
        # this was overwriting the real Belleros
        #        [store_unit]
        #            [filter]
        #                id=Belleros
        #            [/filter]
        #            variable=c_belleros
        #            kill=yes
        #        [/store_unit]
        [kill]
            id=Belleros
        [/kill]
        [set_variable]
            name=c_belleros.facing
            value=ne
        [/set_variable]
        [store_unit]
            [filter]
                id=Echidna
            [/filter]
            variable=echidna
            kill=yes
        [/store_unit]
        [store_unit]
            [filter]
                id=Ares
            [/filter]
            variable=ares
            kill=yes
        [/store_unit]
        {MODIFY_UNIT (side=3) facing nw}
        {MODIFY_UNIT (side=2) facing nw}
        # this does not work, in 1.11.4
        #	[micro_ai]
        #	    side=4
        #	    ai_type=guardian_unit
        #	    action=add
        #	    guardian_type=stationed_guardian
        #	    id=Chimera
        #	    distance=6
        #	    station_x,station_y=25,9
        #	    guard_x,guard_y=19,19
        #	[/micro_ai]
        # 20140713 - updating micro ai
        [micro_ai]
            side=4
            #            ai_type=guardian_unit
            ai_type=return_guardian
            action=add
            #            guardian_type=return_guardian
            id=Orth1
            return_x,return_y=20,8
        [/micro_ai]
        [micro_ai]
            side=4
            #            ai_type=guardian_unit
            ai_type=return_guardian
            action=add
            #            guardian_type=return_guardian
            id=Orth2
            return_x,return_y=28,8
        [/micro_ai]
        {CLEAR_VARIABLE gear_pool_2}
    [/event]

    #    {FLAMES 23 4}
    #    {FLAMES 27 4}
    #    {FLAMES 44 10}
    #    {FLAMES 46 11}

    [side]
        type=Ukian Subcommander
        id=Belleros
        name="Belleros"
        profile="portraits/c_belleros.png"
        ellipse="misc/ellipse-hero"
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]
        unrenamable=yes
        side=1
        canrecruit=yes
        controller=human
        fog=no
        shroud=no
        [ai]
            aggression=0.8
            grouping=offensive
            passive_leader=yes
            caution=0.9
            village_value=0
        [/ai]
        recruit=Ukian Runner, Ukian Regular, Ukian Archer, Ukian Dog
        {GOLD 250 200 150}
        {INCOME 8 6 4}
        team_name=good
        save_id=Lorenzon
        defeat_condition=never
    [/side]

    [side]
        type=Primeval Storm
        id=Athanta
        name="Athanta"
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]
        unrenamable=yes
        side=2
        canrecruit=yes
        controller=ai
        fog=no
        recruit=Primeval Swiftfoot, Primeval Cutter, Primeval Striker, Primeval Ironwheel
        {GOLD 280 220 160}
        {INCOME 16 12 8}
        [ai]
            aggression=0.8
            grouping=offensive
            [aspect]
                id=recruitment
                [facet]
                    [value]
                        name=ai_default::recruitment
                        [limit]
                            type=Primeval Ironwheel
                            max=1
                        [/limit]
                        [limit]
                            type=Primeval Striker
                            max=2
                        [/limit]
                    [/value]
                [/facet]
            [/aspect]
            #            [protect_location]
            #                x=62-67
            #                y=28-31
            #                value=500
            #            [/protect_location]
            [goal]
                name=protect_location
                [criteria]
                    x=62-67
                    y=28-31
                [/criteria]
                value=5
            [/goal]
            [goal]
                name=target
                [criteria]
                    side=1
                [/criteria]
                value=10
            [/goal]
            [leader_goal]
                x,y=20,8
            [/leader_goal]
            village_value=0
            caution=0.8
        [/ai]
        team_name=primeval
        [unit]
            type=Primeval Slasher
            generate_name=yes
            random_traits=yes
            x,y=41,35
        [/unit]
        [unit]
            type=Primeval Slasher
            generate_name=yes
            random_traits=yes
            x,y=43,31
        [/unit]
        [unit]
            type=Primeval Slasher
            generate_name=yes
            random_traits=yes
            x,y=42,35
        [/unit]
    [/side]

    [side]
        type=Bad Raenna
        id=Raenna
        name="Raenna"
        [modifications]
            # RQ=117 QR=?
            {ARCHAIC_TRAIT_QUICK2}
            {ARCHAIC_TRAIT_RESILIENT2}
        [/modifications]
        unrenamable=yes
        side=3
        canrecruit=yes
        fog=no
        shroud=no
        controller=human
        recruit=Primevalist Fighter, Primevalist Follower, Primevalist Fanatic, Primevalist Monk
        {GOLD 220 195 175}
        {INCOME 14 12 10}
        team_name=primeval
        [unit]
            type=Primevalist Fanatic
            id=Follower1
            [modifications]
                {ARCHAIC_TRAIT_ZEALOUS}
                {TRAIT_FEARLESS}
            [/modifications]
            generate_name=yes
            x,y=43,32
        [/unit]
        [unit]
            type=Primevalist Monk
            id=Follower2
            [modifications]
                {ARCHAIC_TRAIT_ZEALOUS}
                {TRAIT_QUICK}
            [/modifications]
            generate_name=yes
            x,y=44,34
        [/unit]
        [unit]
            type=Primevalist Follower
            id=Follower3
            generate_name=yes
            random_traits=yes
            x,y=44,30
        [/unit]
        [unit]
            type=Primevalist Fighter
            id=Follower4
            [modifications]
                {TRAIT_FEARLESS}
                {TRAIT_RESILIENT}
            [/modifications]
            generate_name=yes
            random_traits=yes
            x,y=40,30
        [/unit]
    [/side]

    [side]
        side=4
        #	no_leader=yes
        #        type=Echidna
        type=Ukian Witch
        id=Echidna
        name= "Carghanna"
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]
        unrenamable=yes
        canrecruit=yes
        controller=ai
        fog=no
        team_name=khthon,good
        #        recruit=Ukian Runner, Ukian Regular, Ukian Archer, Ukian Veteran, Ukian Seeress, Ukian Hawkeye, Ukian Dog, Ukian Deadeye, Ukian Courrier
        #        {GOLD 190 260 330}
        #        {INCOME 12 14 16}
        # FLAG : does this need to be updated?
#ifdef __UNUSED__
        [ai]
            aggression=0.8
            grouping=offensive
            [protect_location]
                x=20-29
                y=7-10
                value=500
            [/protect_location]
            [protect_unit]
                side=1
                radius=2
                value=300
            [/protect_unit]
            [target]
                side=2
                value=600
            [/target]
            [target]
                side=3
                value=500
            [/target]
            [target]
                side=5
                value=500
            [/target]
            passive_leader=yes
            caution=0.8
        [/ai]
#endif
        # 20140719
        [ai]
            [goal]
                name=protect_unit
                value=9
                [criteria]
                    id=Belleros
                [/criteria]
                protect_radius=20
            [/goal]
            [goal]
                name=protect_location
                value=5
                [criteria]
                    x,y=20-28,7-10
                [/criteria]
                protect_radius=20
            [/goal]
            [goal]
                name=target
                value=2
                [criteria]
                    id=Raenna
                [/criteria]
            [/goal]
        [/ai]
        # deprecated - but I forget, what was it supposed to do?
        #	{MICRO_AI_GUARDIAN}
        [unit]
            type=Chimera
            random_traits=yes
            id=Chimera
            name="Chimera"
            x,y=25,9
            ai_special=guardian
            facing=se
        [/unit]
        [unit]
            id=Orth1
            type=Orthrus
            random_traits=yes
            #            generate_name=yes
            x,y=20,8
            #            ai_special=guardian
        [/unit]
        [unit]
            id=Orth2
            type=Orthrus
            random_traits=yes
            #            generate_name=yes
            x,y=28,8
            #            ai_special=guardian
        [/unit]
        [unit]
            id=Taur1
            type=Tauricorn
            random_traits=yes
            x,y=34,22
        [/unit]
    [/side]

    [side]
        type=Primeval Ares
        id=Ares
        name= "Ares"
        profile=portraits/ares.png
        [modifications]
            {TRAIT_STRONG}
            {TRAIT_RESILIENT}
        [/modifications]
        unrenamable=yes
        side=5
        canrecruit=yes
        controller=ai
        fog=no
        recruit=Primeval Slow, Primeval Driver, Primeval Dogface, Primeval Swiftfoot, Primeval Striker, Primeval Ironwheel
        # he gets income in the first turns before he shows up.  If he gets gold, we will have 1,000 AI units shuffling around
        {GOLD 100 100 100}
        {INCOME 2 4 6}
        [ai]
            aggression=0.8
            grouping=offensive
            # basing these limits off of the LIMIT_CONTEMPORANEOUS_RECRUITS calls below, but it might be a hold-over from when this was scenario included the volcano interior
            [aspect]
                id=recruitment
                [facet]
                    [value]
                        name=ai_default::recruitment
                        [limit]
                            type=Primeval Ironwheel
                            max=3
                        [/limit]
                        [limit]
                            type=Primeval Striker
                            max=3
                        [/limit]
                        [limit]
                            type=Primeval Driver
                            max=3
                        [/limit]
                        [limit]
                            type=Primeval Dogface
                            max=3
                        [/limit]
                        [limit]
                            type=Primeval Slow
                            max=8
                        [/limit]
                        [limit]
                            type=Primeval Swiftfoot
                            max=7
                        [/limit]
                        [limit]
                            type=Primeval Cutter
                            max=5
                        [/limit]
                    [/value]
                [/facet]
            [/aspect]
#ifdef __UNUSED__
            [protect_location]
                x=20-29
                y=7-10
                value=50
            [/protect_location]
            [target]
                side=6
                value=100
            [/target]
            [target]
                side=1
                value=500
            [/target]
#endif
            [goal]
                name=protect_location
                [criteria]
                    x=20-29
                    y=7-10
                [/criteria]
                value=1
            [/goal]
            [goal]
                name=target
                [criteria]
                    side=6
                [/criteria]
                value=2
            [/goal]
            [goal]
                name=target
                [criteria]
                    side=1
                [/criteria]
                value=9
            [/goal]
            [leader_goal]
                x,y=20,8
            [/leader_goal]
            caution=0.8
            village_value=0
        [/ai]
        team_name=primeval
    [/side]

    [side]
        side=6
        controller=ai
        no_leader=yes
        # Maybe I should just make them all 'good'?
        team_name=khthon,good
        [ai]
            # deprecated, but it used to work, so I need to be sure I've successfully updated it.
#ifdef __UNUSED__
            [target]
                side=1
                value=1
            [/target]
            [target]
                side=2
                value=600
            [/target]
            [target]
                side=3
                value=500
            [/target]
            [target]
                side=5
                value=600
            [/target]
#endif
            [goal]
                name=target
                [criteria]
                    side=2
                [/criteria]
                value=6
            [/goal]
            [goal]
                name=target
                [criteria]
                    side=3
                [/criteria]
                value=5
            [/goal]
            [goal]
                name=target
                [criteria]
                    side=5
                [/criteria]
                value=6
            [/goal]
            aggression=0.8
            caution=0.7
        [/ai]
    [/side]

    # the neutral orcs
    [side]
        side=7
        controller=ai
        no_leader=yes
        team_name=khthon,good,primeval
        [ai]
            ai_algorithm=idle_ai
        [/ai]
    [/side]

    # core macros - be careful
    # 20150404 - removing most of these, in favor of [ai] tweaks
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Primeval Striker" 2}
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 2 "Primeval Ironwheel" 2}
    # side 4 doesn't do anything anymore
    #	{LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Ukian Hawkeye" 3}
    #	{LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Ukian Seeress" 3}
    #	{LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Ukian Veteran" 4}
    #	{LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Ukian Courrier" 2}
    #	{LIMIT_CONTEMPORANEOUS_RECRUITS 4 "Ukian Deadeye" 1}
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Primeval Striker" 3}
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Primeval Ironwheel" 3}
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Primeval Driver" 3}

    # Ares AI just takes too long if he has too many units
    # These should be removed when/if the AI is faster
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Primeval Slow" 10}
    #    {LIMIT_CONTEMPORANEOUS_RECRUITS 5 "Primeval Swiftfoot" 10}

    # So that Chimera doesn't kill Athanta too soon
    {FORCE_CHANCE_TO_HIT race=khthon id=Athanta 10 (
        # Raenna has not reached the keep, Belleros has not shown up
        [variable]
            name=mono
            numerical_equals=0
        [/variable]
    )}
    #    {OBJ_POTION_STRONG 56 29 St1}

    # custom
    #	{OBJ_RING_ANCIENT2 3 15 3 Anc1}

    [event]
        name=start
        [music]
            name="knalgan_theme.ogg"
            immediate=yes
        [/music]
        [message]
            speaker=Athanta
            message = _ "It is unfortunate that you could not turn your friends, but we may be able to cut them off. They must not gain control of the fortress at the summit"
        [/message]
        [center_message]
            message = "Raenna was beginning to remember what had happened in the cave. Recollections of the villain Scarrion set off warning sigals in her head, though she was having a hard time pinning down what it meant. Her mind was still a little clouded."
        [/center_message]
        [message]
            speaker=Raenna
            message = _ "What are these 'dark spirits' Belleros serves? What will happen if he reaches the fortress?"
        [/message]
        [message]
            speaker=Athanta
            message = _ "What will happen? To us, not much. But your kind, and all similar, will lose your... souls. The dark spirits are a pernicious enemy, more like a disease than an entity. They posses and control the bodies of the living, given enough fuel they spread throughout the population of victims like an ill vapor."
        [/message]
        [message]
            speaker=Athanta
            message = _ "If your friends reach the fortress, they will deliver unto the spirits enough fuel to spread over this land. The few survivors will die at the hands of their former kin. My kind does not wish to fight vast armies of the damned, so it is vital to all that we do not let that happen."
        [/message]
        [message]
            speaker=Follower1
            message = _ "It looks like there are guardians, of sorts."
        [/message]
        [scroll_to]
            x,y=19,7
        [/scroll_to]
        [message]
            speaker=Chimera
            message = _ "<i>(snarl...)</i>"
        [/message]
        [message]
            speaker=Athanta
            message = _ "Let's move."
        [/message]
        [apply_gear]
            gear_id=blue_tunic
            id=Raenna
        [/apply_gear]
        [apply_gear]
            gear_id=silver_cloak
            id=Raenna
        [/apply_gear]
        [apply_gear]
            gear_id=primeval_boots
            #            gear_id=brass_greaves
            id=Raenna
        [/apply_gear]
        [apply_gear]
            gear_id=gold_ring
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=blue_tunic
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=primeval_boots
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=fur_cloak
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=elf_cloak
            id=Follower3
        [/apply_gear]
        [apply_gear]
            gear_id=blue_tunic
            id=Follower3
        [/apply_gear]
        [apply_gear]
            gear_id=white_gloves
            id=Follower3
        [/apply_gear]
        [apply_gear]
            gear_id=chain_helmet
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=steel_blade
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=officer_boots
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=chain_armor
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=steel_helmet
            id=Follower4
        [/apply_gear]
        [apply_gear]
            gear_id=leather_gloves
            id=Follower4
        [/apply_gear]
        [apply_gear]
            gear_id=scale_armor
            id=Follower4
        [/apply_gear]
    [/event]

    [event]
        #	name=side 3 turn
        name=fooby
        [apply_gear]
            gear_id=silver_cloak
            id=Raenna
        [/apply_gear]
        [apply_gear]
            gear_id=brass_greaves
            id=Raenna
        [/apply_gear]
        [apply_gear]
            gear_id=gold_ring
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=fur_cloak
            id=Follower2
        [/apply_gear]
        [apply_gear]
            gear_id=fur_cloak
            id=Follower3
        [/apply_gear]
        [apply_gear]
            gear_id=chain_helmet
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=chain_armor
            id=Follower1
        [/apply_gear]
        [apply_gear]
            gear_id=scale_armor
            id=Follower4
        [/apply_gear]
    [/event]

    [event]
        name=turn 12
        [if]
            [variable]
                name=mono
                numerical_equals=0
            [/variable]
            [then]
                [music]
                    name="northern_mountains.ogg"
                    immediate=yes
                [/music]
                [unstore_unit]
                    variable=c_belleros
                    x,y=6,31
                [/unstore_unit]
                [recall]
                    type="Ukian Deadeye"
                    x,y=6,30
                [/recall]
                [message]
                    speaker=Belleros
                    message= _ "The demons are hot on our tail, there are crazy beasts up ahead, this is impossible!"
                [/message]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-40,30,-40
                [/color_adjust]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-80,60,-80
                [/color_adjust]
                [message]
                    speaker=narrator
                    caption="Carghanna"
                    message= _ "No, it is not. The monsters are enemies of the demons, and have held them off. Our path is clear..."
                    {CARGHANNA_GREEN_IMAGE}
                [/message]
                [color_adjust]
                    red,green,blue=-40,30,-40
                [/color_adjust]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-10,-10,0
                [/color_adjust]
                {MOVE_UNIT id=Belleros 17 23}
                {MOVE_UNIT x,y=6,30 15 14}
                {MOVE_UNIT id=Belleros 24 8}
                {FLASH_GREEN (
                    [message]
                        speaker=Raenna
                        message= _ "Something very bad is happening, but I'm too far away to do anything about it..."
                    [/message]
                )}
                [endlevel]
                    result=defeat
                [/endlevel]
            [/then]
        [/if]
    [/event]

    [event]
        {QUANTITY name "turn 5" "turn 4" "turn 3"}
        {GENERIC_UNIT 6 Yak 42 31}
        {GENERIC_UNIT 6 Ophis 44 31}
        {GENERIC_UNIT 6 Taraxippon 44 36}
        {GENERIC_UNIT 6 Horse 44 32}
        {GENERIC_UNIT 6 Katoblepon 43 37}
        {GENERIC_UNIT 6 Orthrus 40 36}
        [message]
            type=Orthrus
            x,y=38-44,34-37
            message= _ "Grrrr..."
        [/message]
        [message]
            speaker=Raenna
            message= _ "Those damn animals... What is going on?"
        [/message]
        [message]
            speaker=Athanta
            message= _ "The lesser spirits are coming to the aid of the one who leads your friends. They have neither the brains nor brawn to take control of the more dangerous races, but they can conscript beasts with weaker minds."
        [/message]
    [/event]

    [event]
        name=new turn
        first_time_only=no
        # decrease the turn_counter, at 0 -> Belleros keep goes away
        # I think this is obsolete
        #        [if]
        #            [variable]
        #                name=turn_counter
        #                numerical_equals=0
        #            [/variable]
        #            [then]
        #                [terrain]
        #                    terrain=Ce
        #                    x,y=6,32
        #                [/terrain]
        #            [/then]
        #        [/if]
        [set_variable]
            name=turn_counter
            add=-1
        [/set_variable]
        [if]
            # so the AI doesn't take forever moving around -> Still takes forever (1.6a). Whacanyahdo...
            # is that ^ still the case?  (1.9)
            [have_unit]
                side=6
                count=0-6
            [/have_unit]
            [then]
                #                [set_variable]
                #                    name=rand1
                #                    rand=Yak,Ram,"Timber Wolf",Yak,Horse,Ram,"Timber Wolf",Orthrus,Ophis,Horse,Taraxippon
                #                [/set_variable]
                [set_variable]
                    name=rand2
                    rand=1..10
                [/set_variable]
                [switch]
                    variable=rand2
                    [case]
                        value=1
                        [unit]
                            type=Taraxippon
                            side=6
                            x,y=44,24
                        [/unit]
                        [unit]
                            type=Horse
                            side=6
                            x,y=40,37
                        [/unit]
                    [/case]
                    [case]
                        value=2
                        [unit]
                            type=Yak
                            side=6
                            x,y=40,37
                        [/unit]
                    [/case]
                    [case]
                        value=3
                        [unit]
                            type=Rockback
                            side=6
                            x,y=28,35
                        [/unit]
                    [/case]
                    [case]
                        value=4
                        [unit]
                            type=Timber Wolf
                            side=6
                            x,y=40,37
                        [/unit]
                    [/case]
                    [case]
                        value=5
                        [unit]
                            type=Timber Wolf
                            side=6
                            x,y=43,17
                        [/unit]
                    [/case]
                    [case]
                        value=6
                        [unit]
                            type=Ram
                            side=6
                            x,y=44,19
                        [/unit]
                    [/case]
                    [case]
                        value=7
                        [unit]
                            type=Ophis
                            side=6
                            x,y=27,37
                        [/unit]
                    [/case]
                    [case]
                        value=8
                        [unit]
                            type=Orthrus
                            side=6
                            x,y=44,19
                        [/unit]
                    [/case]
                    [else]
                        [unit]
                            type=Horse
                            side=6
                            x,y=40,37
                        [/unit]
                    [/else]
                [/switch]
                {CLEAR_VARIABLE rand2}
            [/then]
        [/if]
        [if]
            # so the AI doesn't take forever moving around
            [have_unit]
                side=5
                # hopefully 1 is all it takes to keep this from spawning when Ares hasn't yet shown up
                # Maybe change this if the AI can be faster
                count=1-5
            [/have_unit]
            [then]
                [set_variable]
                    name=prime1
                    rand="Primeval Striker","Primeval Driver","Primeval Dogface"
                [/set_variable]
                [unit]
                    side=5
                    type=$prime1
                    generate_name=yes
                    random_traits=yes
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_RESILIENT}
                    [/modifications]
                    x,y=6,34
                [/unit]
                {CLEAR_VARIABLE prime1}
                [set_variable]
                    name=prime1
                    rand="Primeval Striker","Primeval Slasher","Primeval Swiftfoot","Primeval Swiftfoot"
                [/set_variable]
                [unit]
                    side=5
                    type=$prime1
                    generate_name=yes
                    [modifications]
                        {TRAIT_LOYAL}
                        {TRAIT_QUICK}
                    [/modifications]
                    x,y=32,37
                [/unit]
                {CLEAR_VARIABLE prime1}
            [/then]
        [/if]
        [if]
            [variable]
                name=mono
                numerical_equals=0
            [/variable]
            # if Belleros is here (mono = 1), start the countdown for Ares to arrive
            [else]
                [set_variable]
                    name=mono
                    add=1
                [/set_variable]
            [/else]
        [/if]
        [if]
            [variable]
                name=mono
                {QUANTITY numerical_equals 7 4 2}
            [/variable]
            [then]
                [unstore_unit]
                    variable=ares
                [/unstore_unit]
                {GENERIC_UNIT 5 "Primeval Driver" 1 33}
                {GENERIC_UNIT 5 "Primeval Striker" 4 32}
                [music]
                    name="knalgan_theme.ogg"
                    immediate=yes
                    append=yes
                [/music]
                {MODIFY_UNIT (side=5) facing ne}
                [message]
                    speaker=Ares
                    message= _ "Where does he think he's going? We will not let them reach the stronghold..."
                [/message]
                [message]
                    speaker=Raenna
                    message= _ "(A stronghold...)"
                [/message]
                {MODIFY_UNIT (id=Athanta) facing sw}
                [message]
                    speaker=Athanta
                    message= _ "Has Nemesis fallen? Where is she?"
                [/message]
                [message]
                    speaker=Ares
                    message= _ "Nemesis has a plan, she will join us in a little while."
                [/message]
            [/then]
        [/if]
    [/event]

    [event]
        name=moveto
        [filter]
            id=Raenna
            x,y=23-25,3-6
        [/filter]
        [message]
            speaker=Raenna
            message= _ "Plunging into the darkness... Those who can keep up, follow me!"
        [/message]
        [message]
            speaker=Athanta
            message= _ "You will need to move quickly, Raenna, for your followers will turn on us if Echidna is successful."
        [/message]
        [message]
            speaker=Ares
            message= _ "I will have no problem exterminating any who fall under the sway of the Khthon..."
        [/message]
        [unit]
            side=3
            type=Northern Ranger
            id=Carusoe
            profile=portraits/carusoe.png
            name=Carusoe
            x,y=1,15
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_LOYAL}
            [/modifications]
            facing=nw
        [/unit]
        {MOVE_UNIT id=Carusoe 23 12}
        [message]
            speaker=Carusoe
            message = _ "Recent events have been confusing, but I will not let you out of my sight!"
        [/message]
        [message]
            race=primevalist_human
            message = _ "Who is that?"
        [/message]
        [message]
            speaker=Raenna
            message = _ "A gadfly. Keep him at arm's length..."
        [/message]
        [message]
            speaker=Carusoe
            message = _ "..."
        [/message]
        #        {MOVE_UNIT id=Carusoe 4 20}

        # Raenna's side is not in next scenario, but it is in the one after that
        [store_unit]
            [filter]
                id=Raenna
            [/filter]
            variable=c_raenna
            kill=yes
        [/store_unit]
        [store_unit]
            [filter]
                side=3
            [/filter]
            variable=side_three
            kill=yes
        [/store_unit]
        [store_unit]
            [filter]
                side=1
            [/filter]
            variable=side_one
            kill=yes
        [/store_unit]
        #        {CLEAR_VARIABLE c_belleros}
        {CLEAR_VARIABLE echidna}
        [endlevel]
            #		result=continue
            {CONTINUE}
        [/endlevel]
    [/event]

    [event]
        name=moveto
        [filter]
            side=3
            x,y=24,8
        [/filter]
        [message]
            speaker=unit
            message= _ "Yep, it's a monolith. A carved piece of rock... It doesn't seem to do anything."
        [/message]
        [message]
            speaker=Athanta
            message= _ "Strange. (I wonder if...)"
        [/message]
    [/event]

    # Does this help Athanta be less stupid?  Maybe.  Not sure.
    [event]
        name=moveto
        [filter]
            id=Athanta
            x,y=20,8
        [/filter]
        [modify_side]
            side=2
            [ai]
                aggression=0.8
                grouping=offensive
                [target]
                    side=1
                    value=900
                [/target]
                [target]
                    side=6
                    value=1
                [/target]
                village_value=0
                caution=0.8
            [/ai]
        [/modify_side]
    [/event]

    # Belleros has made it past Athanta, so she heads back to the other keeps

    [event]
        name=moveto
        [filter]
            id=Ares
            y=1-11
        [/filter]
        [message]
            speaker=Ares
            message=_"What's tha hold-up here?"
        [/message]
    [/event]

    [event]
        name=moveto
        [filter]
            id=Belleros
            y=1-17
        [/filter]
        [modify_ai]
            side=2
            action=add
            path=goal
            [goal]
                id=s2_ploc
                value=50
                [criteria]
                    x=19-29
                    y=8-12
                [/criteria]
            [/goal]
        [/modify_ai]
        [modify_ai]
            side=2
            action=add
            path=aspect[leader_goal].facet[always]
            [facet]
                id="always"
                [value]
                    id="always"
                    x=20
                    y=8
                    auto_remove="yes"
                [/value]
            [/facet]
        [/modify_ai]
        # deprecated, re-written above, I think.  Will be removed after testing
#ifdef __UNUSED__
        [modify_side]
            side=2
            [ai]
                aggression=0.8
                grouping=offensive
                [protect_location]
                    x=19-29
                    y=8-12
                    value=500
                [/protect_location]
                [leader_goal]
                    x,y=20,8
                [/leader_goal]
                [target]
                    side=1
                    value=900
                [/target]
                [target]
                    side=6
                    value=1
                [/target]
                village_value=0
                caution=0.8
            [/ai]
        [/modify_side]
#endif
    [/event]

    # Belleros shows up once Raenna reaches the keep.  I should probably change this to a timed event, but this will do for now.
    [event]
        name=moveto
        [filter]
            id=Raenna
            x=20-28
            y=8-10
        [/filter]
        [message]
            speaker=Raenna
            message= _ "We've made it to the top. It's not clear what we need to do..."
        [/message]
        [music]
            name="legends_of_the_north.ogg"
            immediate=yes
        [/music]
        [message]
            speaker=Athanta
            message= _ "Look who's here..."
        [/message]

        [unstore_unit]
            variable=c_belleros
            x,y=6,31
        [/unstore_unit]
        [recall]
            type=Ukian Deadeye
            x,y=6,30
        [/recall]
        [recall]
            type=Ukian Witch
            x,y=5,31
        [/recall]
        [recall]
            type=Ukian Commando
            x,y=8,32
        [/recall]
        [recall]
            type=Ukian Flareman
            x,y=7,32
        [/recall]
        [recall]
            type=Ukian Veteran
            x,y=7,31
        [/recall]
        {MODIFY_UNIT (side=1) facing ne}
        [message]
            speaker=Belleros
            message= _ "The daemons are already at the peak. We're too late!"
        [/message]
        [delay]
            time=150
        [/delay]
        [color_adjust]
            red,green,blue=-40,30,-40
        [/color_adjust]
        [delay]
            time=150
        [/delay]
        [color_adjust]
            red,green,blue=-80,60,-80
        [/color_adjust]
        [message]
            speaker=narrator
            caption="Carghanna"
            message= _ "No, it is not too late. The monsters are enemies of the demons, it should buy us some time. Lay your hands upon the monolith up ahead, and we will be able to slip past the demons and into more defensible territory."
            {CARGHANNA_GREEN_IMAGE}
        [/message]
        [scroll_to]
            x,y=24,8
        [/scroll_to]
        [delay]
            time=250
        [/delay]

        [color_adjust]
            red,green,blue=-40,30,-40
        [/color_adjust]
        [delay]
            time=150
        [/delay]
        [color_adjust]
            red,green,blue=-10,-10,0
        [/color_adjust]
        [delay]
            time=100
        [/delay]
        [message]
            speaker=Belleros
            message= _ "We need to reach that monolith up ahead, it will allow us to gain the upper hand against the demons."
        [/message]
        [message]
            x,y=6,30
            message= _ "Yessir!..."
        [/message]
        {MODIFY_UNIT x,y=6,30 facing sw}
        [message]
            x,y=6,30
            message= _ "Sir! The daemon forces are scaling the cliff!"
        [/message]
        {MODIFY_UNIT id=Belleros facing sw}
        [message]
            speaker=Belleros
            message= _ "And they are too spread out for us to simply drop rocks on their heads. We must not stay here, we must get to the monolith!"
        [/message]
        [message]
            speaker=Raenna
            message= _ "(The monolith...)"
        [/message]
        [set_variable]
            name=mono
            value=1
        [/set_variable]
        [set_variable]
            name=turn_counter
            value=1
        [/set_variable]
        [message]
            speaker=Athanta
            message= _ "Keep the big cat busy, I will make sure the human pawns do not reach their target..."
        [/message]
        [modify_side]
            side=2
            [ai]
                aggression=0.8
                grouping=offensive
                [target]
                    side=1
                    value=900
                [/target]
                [target]
                    side=6
                    value=1
                [/target]
                [leader_goal]
                    x,y=19,19
                [/leader_goal]
                village_value=0
                caution=0.8
            [/ai]
        [/modify_side]
        [modify_turns]
            value=-1
        [/modify_turns]
        [objectives]
            side=1
            [objective]
                condition=win
                description=_ "Belleros reaches the Monolith"
            [/objective]
            [objective]
                condition=lose
                description=_ "Death of Belleros"
            [/objective]
            #            note= _ "You only have one turn to recall or recruit in this encampment."
        [/objectives]
        [objectives]
            side=3
            [objective]
                condition=win
                description=_ "Keep the Chimera occupied"
            [/objective]
            [objective]
                condition=lose
                description=_ "Death of Raenna"
            [/objective]
            [objective]
                condition=lose
                description=_ "Death of Belleros"
            [/objective]
            note= _ "Keep in mind that Raenna doesn't trust the Primevals, and doesn't necessarily want to hand them an easy victory.  So go easy on Belleros and the Ukians."
        [/objectives]
    [/event]

    # Athanta has served her purpose
    # 10-2011: this is outdated, she should not die.
    [event]
        name=last breath
        [filter]
            id=Athanta
        [/filter]
        [message]
            speaker=unit
            message=_   "This gains you nothing... All Khthon pests will be exterminated..."
        [/message]
        [message]
            speaker=Raenna
            message=_   "Huh."
        [/message]
    [/event]

    # Raenna is the hero now.
    [event]
        name=die
        [filter]
            id=Raenna
        [/filter]
        [center_message]
            message="Any hope for the world died along with Raenna. The victor of this battle, demon or spirit, would usher forth a new distopia."
            image="misc/skull.png"
        [/center_message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
        name=moveto
        [filter]
            id=Belleros
            y=1-13
        [/filter]
        [message]
            speaker=Belleros
            message= _ "Raenna! Let me reach the monolith..."
        [/message]
        [message]
            speaker=Raenna
            message= _ "What exactly do you think is going to happen if you touch that monolith?"
        [/message]
        [message]
            speaker=Belleros
            message= _ "What do you think will happen if I <i>don't</i>!? Are you really so far gone? We were happy back in the south, remember? You, Lorenzon, and I had shepherded our people to a better land. Scarrion and these - these <i>things</i> - ruined everything. Lorenzon and many others are now dead, and we will all be crushed under the demonic horde if you do not <b>let me pass!</b>"
        [/message]
        [message]
            speaker=Raenna
            message= _ "How do you know this?"
        [/message]
        [message]
            speaker=Belleros
            message= _ "Carghanna told me. She has a plan to save us."
        [/message]
        [message]
            speaker=Athanta
            message= _ "-(snort!)-"
        [/message]
        [message]
            speaker=Raenna
            message= _ "Belleros, you fool..."
        [/message]
        [message]
            speaker=Raenna
            message= _ "(And yet, he does have a point... Do I really want to deliver a clear victory to the Ancient Ones?)"
        [/message]
        {FOREACH side1_orcs io}
            [set_variable]
                name=side1_orcs[$io].side
                value=7
            [/set_variable]
            [unstore_unit]
                variable=side1_orcs[$io]
                x,y=2,12
                find_vacant=yes
            [/unstore_unit]
        {NEXT io}
        {CLEAR_VARIABLE side1_orcs}
        [message]
            speaker=Grat Gareth
            message= _ "You were right, Hrala, this is where they were headed.  I don't see what we can do here though, I should get you-"
        [/message]
        [message]
            speaker=Hrala Gareth
            message= _ "No, this is too important, we can't hide any longer."
        [/message]
        {MODIFY_UNIT (id=Hrala Gareth) facing se}
        {MODIFY_UNIT (id=Grat Gareth) facing se}
        [message]
            speaker=Hrala Gareth
            message= _ "Belleros, and ... I remember you ..."
        [/message]
        [message]
            speaker=Raenna
            message= _ "Yes, we met south of the old Copper Mines, a while back.  I'm Raenna of Korkath Woods."
        [/message]
        [message]
            speaker=Hrala Gareth
            message= _ "I see...  it looks like you are fighting.  Why?"
        [/message]
        [message]
            speaker=narrator
            caption="Raenna and Belleros"+_" (talking over each other)"
            image=misc/blank-hex.png~SCALE(500,410)~BLIT(portraits/raenna_bad.png,90,0)~BLIT(portraits/c_belleros.png,0,10)
            message= _ "They are under the sway of daemons!"
        [/message]
        [message]
            speaker=Grat Gareth
            message= _ "Right, well, I think I'll take our friend Belleros' word over that of the daemon lady-"
        [/message]
        [message]
            speaker=Hrala Gareth
            message= _ "Not so fast, Grat...  I sense something is not as it seems.  Let us hang back for now..."
        [/message]
        # if either Belleros or Raenna attack each other, the orcs join the defender's side.  But they lose the Drifters.
        [event]
            name=attack_end
            [filter]
                side=1,3
            [/filter]
            [filter_second]
                side=1,3
            [/filter_second]
            [message]
                speaker=Hrala Gareth
                message= _ "They should not be fighting...  I think both of them would have known that.  The aggressor is under the sway of daemons, our choice is made.  We should send the Drifters away however.  If anyone can survive this to tell others of our story, it is them."
            [/message]
            [if]
                [variable]
                    name=unit.side
                    equals=1
                [/variable]
                [then]
                    [message]
                        speaker=Grat Gareth
                        message= _ "All right Raenna, I was wrong about you, forgive me.  The last of the Gareth Banner fights for you, let us stop the daemons!"
                    [/message]
                    {MODIFY_UNIT (side=7) side 3}
                    [allow_recruit]
                        side=3
                        type=Orcish Archer,Orcish Grunt, Orcish Serf, Orcish Slinger
                    [/allow_recruit]
                [/then]
                [else]
                    [message]
                        speaker=Grat Gareth
                        message= _ "I knew it!  Belleros, we are coming to your aid!"
                    [/message]
                    {MODIFY_UNIT (side=7) side 1}
                    [allow_recruit]
                        side=1
                        type=Orcish Archer,Orcish Grunt, Orcish Serf, Orcish Slinger
                    [/allow_recruit]
                [/else]
            [/if]
        [/event]
        [if]
            [have_unit]
                side=2,3
                y=1-11
                count=4-99
            [/have_unit]
            [then]
                [message]
                    speaker=Belleros
                    message= _ "That monolith is pretty well guarded..."
                [/message]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-40,30,-40
                [/color_adjust]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-80,60,-80
                [/color_adjust]
                [message]
                    speaker=narrator
                    caption="Carghanna"
                    message= _ "The ground is riddled with vent tunnels and burrows, you should be able to sneak up to the entrance through that cavern."
                    {CARGHANNA_GREEN_IMAGE}
                [/message]
                [scroll_to]
                    x,y=21,16
                [/scroll_to]
                [delay]
                    time=250
                [/delay]

                [color_adjust]
                    red,green,blue=-40,30,-40
                [/color_adjust]
                [delay]
                    time=150
                [/delay]
                [color_adjust]
                    red,green,blue=-10,-10,0
                [/color_adjust]
                [delay]
                    time=100
                [/delay]
                [message]
                    speaker=Belleros
                    message= _ "I see.  If I can't get through Raenna and her guards, I can go under them..."
                [/message]
                [tunnel]
                    id=bmr_salvation_under
                    [filter]
                        side=1
                    [/filter]
                    [source]
                        x,y=21,16
                    [/source]
                    [target]
                        x=30,24,17
                        y=8,10,9
                    [/target]
                    bidirectional=no
                [/tunnel]
                [event]
                    name=exit_hex
                    first_time_only=no
                    [filter]
                        side=1
                        x,y=21,16
                    [/filter]
                    [switch]
                        variable=x2
                        [case]
                            value=30
                            [remove_item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=30,8
                            [/remove_item]
                            [item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=30,8
                            [/item]
                        [/case]
                        [case]
                            value=24
                            [remove_item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=24,10
                            [/remove_item]
                            [item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=24,10
                            [/item]
                        [/case]
                        [case]
                            value=17
                            [remove_item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=17,9
                            [/remove_item]
                            [item]
                                image=scenery/snow_tunnel_ring.png
                                x,y=17,9
                            [/item]
                        [/case]
                    [/switch]
                [/event]
            [/then]
        [/if]
    [/event]

    # Belleros reaches the monolith, Echidna shows up and take control.  Now Raenna and Primevals must fight through the Ukians.
    # 20140719 - changing this...  Belleros gets one more scenario, Ukians don't just change to khthon

    [event]
        name=moveto
        [filter]
            id=Belleros
            # for testing
            #		x,y=54,65
            x,y=24,8
        [/filter]
        [message]
            speaker=Belleros
            message= _ "The monolith is getting warmer, what does it mean..."
        [/message]
        # this is no longer what should happen
        #        [modify_side]
        #            side=1
        #            controller=ai
        #        [/modify_side]
        [kill]
            id=Chimera
            animate=yes
        [/kill]
        [music]
            name="the_city_falls.ogg"
            immediate=yes
        [/music]
        [color_adjust]
            red=-50
            green=60
            blue=-50
        [/color_adjust]
        [message]
            speaker=narrator
            message= _ "Well, Belleros..."
            caption= "Carghanna"
            {CARGHANNA_GREEN_IMAGE}
        [/message]
        [move_unit_fake]
            type=BMR Spark
            side=4
            x=24,24
            y=1,7
        [/move_unit_fake]
        [unit]
            side=1
            type=Ukian Witch
            name=Carghanna
            id=Carghanna_
            x,y=24,7
            facing=sw
            [modifications]
                [object]
                    [filter]
                        id=Carghanna_
                    [/filter]
                    silent=yes
                    [effect]
                        apply_to=image_mod
                        replace=~O(0.4)~CS(-10,80,40)
                    [/effect]
                [/object]
            [/modifications]
            profile=portraits/carghanna.png~O(0.6)~CS(-10,80,40)~BLIT(halo/echidna.png~SCALE(410,410),0,0)
        [/unit]
        [message]
            speaker=Carghanna_
            message= _ "Thank you, Dear Belleros!"
        [/message]
        [unstore_unit]
            variable=echidna
            find_vacant=no
        [/unstore_unit]
        {TRANSFORM_UNIT (id=Echidna) Echidna}
        [message]
            speaker=Echidna
            message= _ "Now we can start raising forces to combat the cold, red-eyed enemy."
        [/message]
        [color_adjust]
            red=-60
            green=80
            blue=-60
        [/color_adjust]
        [message]
            speaker=Belleros
            message= _ "What are you? What's happening-"
        [/message]
        [set_variable]
            name=open_cave
            value=1
        [/set_variable]
        {QUAKE "rumble.ogg"}
        [terrain]
            terrain=Xv
            x=7
            y=1
        [/terrain]
        [terrain]
            terrain=Ur
            x=24
            y=4-6
        [/terrain]
        [terrain]
            terrain=Uu
            x=23,25-26
            y=5-6,5-6
        [/terrain]
        [redraw][/redraw]
        # make the Ukians glow (<-broken) and be on the other side
        #        {MODIFY_UNIT (
        #            side=1
        #        ) halo "halo/echidna.png"}
        [color_adjust]
            red=-50
            green=60
            blue=-50
        [/color_adjust]
        [color_adjust]
            red=0
            green=0
            blue=0
        [/color_adjust]
        [message]
            speaker=Echidna
            message= _ "Come! Let us secure our triumph."
        [/message]
        [message]
            speaker=Belleros
            message= _ "..."
        [/message]
        {MOVE_UNIT id=Echidna 24 4}
        {MOVE_UNIT id=Belleros 24 5}
        [store_unit]
            [filter]
                id=Belleros
            [/filter]
            variable=c_belleros
            kill=yes
        [/store_unit]
        [store_unit]
            [filter]
                id=Echidna
            [/filter]
            variable=echidna
            kill=yes
        [/store_unit]
        [redraw][/redraw]
        [message]
            race=ukian
            message= _ "We need to get into that cave, we can't leave the Commander in the hands of that snake-thing!"
        [/message]
        [event]
            name=moveto
            first_time_only=no
            [filter]
                side=1
                x,y=23-26,4-7
            [/filter]
            {PUT_TO_RECALL_LIST (id=$unit.id)}
        [/event]
        [message]
            speaker=Raenna
            message= _ "What-  What is going on - <b><i>That's</i></b> Carghanna?"
        [/message]
        [message]
            speaker=Athanta
            message= _ "That was once Carghanna, but no more. You're friends are gone, victims of the dark spirits - I'm sorry it had to come to this. We must vanquish them before they gain total control of the fortress."
        [/message]
        [if]
            [have_unit]
                side=7
            [/have_unit]
            [then]
                [message]
                    speaker=Grat Gareth
                    message= _ "I think it's pretty clear who was being lead by daemons!  The last of the Gareth Banner fights for you, Raenna, let us stop the daemons!"
                [/message]
                {MODIFY_UNIT (side=7) side 3}
                [allow_recruit]
                    side=3
                    type=Orcish Archer,Orcish Grunt, Orcish Drifter, Orcish Serf, Orcish Slinger
                [/allow_recruit]
            [/then]
        [/if]
        [objectives]
            side=1
            [objective]
                condition=win
                description=_ "Enter the cave before any of the Primevals reach it"
            [/objective]
        [/objectives]
        [objectives]
            side=3
            [objective]
                condition=win
                description=_ "Enter the cave"
            [/objective]
            [objective]
                condition=lose
                description=_ "Death of Raenna"
            [/objective]
        [/objectives]
    [/event]

    # if Belleros is killed before he reaches the monolith, the player loses
    [event]
        name=die
        [filter]
            id=Belleros
        [/filter]
        [if]
            [variable]
                name=open_cave
                numerical_equals=0
            [/variable]
            [then]
                [message]
                    speaker=Athanta
                    message= _ "We stopped that fire before it began..."
                [/message]
                [message]
                    speaker=Ares
                    message= _ "Ha! Now let us get to work. One of the human followers must touch the monolith to let us in."
                [/message]
                [message]
                    speaker=Raenna
                    message= _ "(No...)"
                [/message]
                [endlevel]
                    result=defeat
                [/endlevel]
            [/then]
        [/if]
    [/event]
[/scenario]
